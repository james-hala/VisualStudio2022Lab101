AI æå• ä¾‹2, Copilot:
çµ¦æˆ‘ C# .Net 8.0 çš„ç¨‹å¼, åŒ…å«æ–°å¢ã€ä¿®æ”¹ã€åˆªé™¤ã€ä»¥åŠæŸ¥è©¢å–®ç­†, æŸ¥è©¢å¤šç­†çš„å‡½æ•¸, ç¶“ç”±ä»¥ä¸‹ class CRecord, å­˜å– MySql çš„ table tlab3.  

CREATE TABLE `tlab3` (
  `fpk1` int NOT NULL,
  `fsku` varchar(16) NOT NULL,
  `fname` varchar(64) CHARACTER SET utf8mb3 COLLATE utf8mb3_general_ci DEFAULT NULL,
  `fprice` decimal(13,2) NOT NULL,
  `fqty` int NOT NULL,
  `famount` decimal(13,2) NOT NULL,
  `fcreate_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `fupdate_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`fpk1`)
  UNIQUE KEY `fpk1_UNIQUE` (`fpk1`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

public class CRecord
{
	public int PK1  = 0;
	public string SKU = string.Empty;
	public string? Name = null;
	public decimal Price = 0;
	public int Qty = 0;
	public decimal Amount = 0;
	public DateTime CreateTime = DateTime.MinValue;
	public DateTime LastUpdateTime = DateTime.MinValue;
}

ä»¥ä¸‹æ˜¯ C# .NET 8.0 ä½¿ç”¨ MySql.Data å¥—ä»¶æ“ä½œ MySQL è³‡æ–™åº« `tlab3` çš„ç¨‹å¼ç¢¼ï¼ŒåŒ…å«æ–°å¢ã€ä¿®æ”¹ã€åˆªé™¤ã€æŸ¥è©¢å–®ç­†èˆ‡æŸ¥è©¢å¤šç­†çš„å‡½æ•¸å¯¦ä½œï¼š

### **ç¯„ä¾‹ç¨‹å¼ç¢¼**
```csharp
using System;
using System.Collections.Generic;
using MySql.Data.MySqlClient;

public class DatabaseHandler
{
    private string connectionString = "Server=localhost;Database=your_database;User ID=your_user;Password=your_password;";

    // æ–°å¢
    public void AddRecord(CRecord record)
    {
        string query = "INSERT INTO tlab3 (fpk1, fsku, fname, fprice, fqty, famount) VALUES (@PK1, @SKU, @Name, @Price, @Qty, @Amount)";
        using var connection = new MySqlConnection(connectionString);
        using var command = new MySqlCommand(query, connection);
        command.Parameters.AddWithValue("@PK1", record.PK1);
        command.Parameters.AddWithValue("@SKU", record.SKU);
        command.Parameters.AddWithValue("@Name", record.Name);
        command.Parameters.AddWithValue("@Price", record.Price);
        command.Parameters.AddWithValue("@Qty", record.Qty);
        command.Parameters.AddWithValue("@Amount", record.Amount);
        connection.Open();
        command.ExecuteNonQuery();
    }

    // ä¿®æ”¹
    public void UpdateRecord(CRecord record)
    {
        string query = "UPDATE tlab3 SET fsku = @SKU, fname = @Name, fprice = @Price, fqty = @Qty, famount = @Amount WHERE fpk1 = @PK1";
        using var connection = new MySqlConnection(connectionString);
        using var command = new MySqlCommand(query, connection);
        command.Parameters.AddWithValue("@PK1", record.PK1);
        command.Parameters.AddWithValue("@SKU", record.SKU);
        command.Parameters.AddWithValue("@Name", record.Name);
        command.Parameters.AddWithValue("@Price", record.Price);
        command.Parameters.AddWithValue("@Qty", record.Qty);
        command.Parameters.AddWithValue("@Amount", record.Amount);
        connection.Open();
        command.ExecuteNonQuery();
    }

    // åˆªé™¤
    public void DeleteRecord(int pk1)
    {
        string query = "DELETE FROM tlab3 WHERE fpk1 = @PK1";
        using var connection = new MySqlConnection(connectionString);
        using var command = new MySqlCommand(query, connection);
        command.Parameters.AddWithValue("@PK1", pk1);
        connection.Open();
        command.ExecuteNonQuery();
    }

    // æŸ¥è©¢å–®ç­†
    public CRecord? GetRecord(int pk1)
    {
        string query = "SELECT * FROM tlab3 WHERE fpk1 = @PK1";
        using var connection = new MySqlConnection(connectionString);
        using var command = new MySqlCommand(query, connection);
        command.Parameters.AddWithValue("@PK1", pk1);
        connection.Open();
        using var reader = command.ExecuteReader();
        if (reader.Read())
        {
            return new CRecord
            {
                PK1 = reader.GetInt32("fpk1"),
                SKU = reader.GetString("fsku"),
                Name = reader.IsDBNull("fname") ? null : reader.GetString("fname"),
                Price = reader.GetDecimal("fprice"),
                Qty = reader.GetInt32("fqty"),
                Amount = reader.GetDecimal("famount"),
                CreateTime = reader.GetDateTime("fcreate_time"),
                LastUpdateTime = reader.GetDateTime("fupdate_time")
            };
        }
        return null;
    }

    // æŸ¥è©¢å¤šç­†
    public List<CRecord> GetAllRecords()
    {
        string query = "SELECT * FROM tlab3";
        var records = new List<CRecord>();
        using var connection = new MySqlConnection(connectionString);
        using var command = new MySqlCommand(query, connection);
        connection.Open();
        using var reader = command.ExecuteReader();
        while (reader.Read())
        {
            records.Add(new CRecord
            {
                PK1 = reader.GetInt32("fpk1"),
                SKU = reader.GetString("fsku"),
                Name = reader.IsDBNull("fname") ? null : reader.GetString("fname"),
                Price = reader.GetDecimal("fprice"),
                Qty = reader.GetInt32("fqty"),
                Amount = reader.GetDecimal("famount"),
                CreateTime = reader.GetDateTime("fcreate_time"),
                LastUpdateTime = reader.GetDateTime("fupdate_time")
            });
        }
        return records;
    }
}

public class Program
{
    public static void Main()
    {
        var dbHandler = new DatabaseHandler();

        // æ–°å¢è³‡æ–™
        dbHandler.AddRecord(new CRecord { PK1 = 1, SKU = "SKU001", Name = "Item 1", Price = 100, Qty = 2, Amount = 200 });

        // ä¿®æ”¹è³‡æ–™
        dbHandler.UpdateRecord(new CRecord { PK1 = 1, SKU = "SKU002", Name = "Updated Item", Price = 150, Qty = 3, Amount = 450 });

        // æŸ¥è©¢å–®ç­†
        var record = dbHandler.GetRecord(1);
        Console.WriteLine(record != null ? $"æŸ¥è©¢çµæœ: {record.Name}" : "ç„¡æ­¤ç´€éŒ„");

        // æŸ¥è©¢å¤šç­†
        var allRecords = dbHandler.GetAllRecords();
        Console.WriteLine($"å…±æœ‰ {allRecords.Count} ç­†ç´€éŒ„");

        // åˆªé™¤è³‡æ–™
        dbHandler.DeleteRecord(1);
    }
}
```

### **ç¨‹å¼èªªæ˜**
1. **é€£ç·šå­—ä¸²**ï¼šæ›´æ–° `connectionString` ç‚ºä½ çš„ MySQL è³‡æ–™åº«è¨­å®šã€‚
2. **åƒæ•¸åŒ–æŸ¥è©¢**ï¼šç¢ºä¿ä½¿ç”¨åƒæ•¸åŒ–æŸ¥è©¢ä»¥é˜²ç¯„ SQL Injection æ”»æ“Šã€‚
3. **ç•°å¸¸è™•ç†**ï¼šåœ¨å¯¦å‹™ä¸­ï¼Œå»ºè­°åŠ å…¥ `try-catch` å€å¡Šä»¥è™•ç†å¯èƒ½çš„ä¾‹å¤–æƒ…æ³ã€‚

å¦‚æœä½ éœ€è¦èª¿æ•´é‚è¼¯æˆ–é‡å°ç‰¹å®šæƒ…å¢ƒé€²è¡Œå„ªåŒ–ï¼Œè«‹å‘Šè¨´æˆ‘ï¼Œæˆ‘å¯ä»¥é€²ä¸€æ­¥æä¾›å»ºè­°ï¼ ğŸ˜Š

